(this["webpackJsonpdabing-frontend"]=this["webpackJsonpdabing-frontend"]||[]).push([[0],{117:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t),n.d(t,"TheToaster",(function(){return ke}));var a=n(1),r=n.n(a),i=n(19),c=n.n(i),s=n(15),o=n(153),l=(n(112),n(113),n(114),n(115),n(116),n(117),n(8)),d=n(40),u=n(43),b=n(0),j="N/A",h={fontWeight:600},m=function(e){var t=e.pair,n=e.tooltipContent,a=e.parentTagStyle,r=e.keyTagStyle,i=e.valueTagStyle,c=Object(b.jsx)(b.Fragment,{children:t.key});n&&(c=Object(b.jsx)(d.a,{className:u.a.TOOLTIP2_INDICATOR,content:n,position:"bottom",children:t.key}));var s="";switch(t.unit&&(s=" "+t.unit),typeof t.value){case"string":return Object(b.jsxs)("div",{style:a,children:[Object(b.jsx)("div",{className:"db-overflow",style:Object(l.a)(Object(l.a)({},h),i),children:""===t.value?j:t.value+s}),Object(b.jsx)("div",{className:"bp3-text-muted",style:r,children:c})]});case"number":return Object(b.jsxs)("div",{style:a,children:[Object(b.jsx)("div",{className:"db-overflow",style:Object(l.a)(Object(l.a)({},h),i),children:0===t.value?j:t.value.toLocaleString()+s}),Object(b.jsx)("div",{className:"bp3-text-muted",style:r,children:c})]});case"boolean":return Object(b.jsxs)("div",{style:a,children:[Object(b.jsx)("div",{className:"dp-pair",style:Object(l.a)(Object(l.a)({},h),i),children:t.value?"True":"False"}),Object(b.jsx)("div",{className:"bp3-text-muted",style:r,children:c})]})}return Object(b.jsxs)("div",{style:a,children:[Object(b.jsx)("div",{className:"db-overflow",style:Object(l.a)(Object(l.a)({},h),i),children:j}),Object(b.jsx)("div",{className:"bp3-text-muted",style:r,children:c})]})},p=n(18),g=n.n(p),f=n(22),x=n(72),O=n(29),v=function(e){var t=e.content,n=e.buttonProps;return Object(b.jsx)(O.a,{content:t,popoverClassName:u.a.TOOLTIP2,children:Object(b.jsx)(o.a,Object(l.a)({icon:"help",minimal:!0,intent:"primary",style:{cursor:"help"}},n))})},y="/",w=[{freq:"174928",channel:"5A"},{freq:"176640",channel:"5B"},{freq:"178352",channel:"5C"},{freq:"180064",channel:"5D"},{freq:"181936",channel:"6A"},{freq:"183648",channel:"6B"},{freq:"185360",channel:"6C"},{freq:"187072",channel:"6D"},{freq:"188928",channel:"7A"},{freq:"190640",channel:"7B"},{freq:"192352",channel:"7C"},{freq:"194064",channel:"7D"},{freq:"195936",channel:"8A"},{freq:"197648",channel:"8B"},{freq:"199360",channel:"8C"},{freq:"201072",channel:"8D"},{freq:"202928",channel:"9A"},{freq:"204640",channel:"9B"},{freq:"206352",channel:"9C"},{freq:"208064",channel:"9D"},{freq:"209936",channel:"10A"},{freq:"211648",channel:"10B"},{freq:"213360",channel:"10C"},{freq:"215072",channel:"10D"},{freq:"216928",channel:"11A"},{freq:"218640",channel:"11B"},{freq:"220352",channel:"11C"},{freq:"222064",channel:"11D"},{freq:"223936",channel:"12A"},{freq:"225648",channel:"12B"},{freq:"227360",channel:"12C"},{freq:"229072",channel:"12D"},{freq:"230784",channel:"13A"},{freq:"232496",channel:"13B"},{freq:"234208",channel:"13C"},{freq:"235776",channel:"13D"},{freq:"237488",channel:"13E"},{freq:"239200",channel:"13F"}].map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:t+1})})),S=Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"A simple moving average is commonly used to smooth out short-term fluctuations in the data."}),"Select the length of the window. If you do not want to do the simple moving average, then select 1."]});function k(e){var t=w.find((function(t){return t.channel===e}));if(void 0!==t){var n=Number(t.freq)-1024;return Array.from({length:2048},(function(e,t){return n+t}))}return Array.from({length:2048},(function(e,t){return t}))}var N=k("12C"),T=function(){var e=r.a.useState(null),t=Object(s.a)(e,2),n=t[0],a=t[1],i=r.a.useRef(N),c=r.a.useRef(""),d=r.a.useRef(void 0),u=r.a.useRef(void 0),j=r.a.useState({changedTo:3,releasedTo:3}),h=Object(s.a)(j,2),m=h[0],p=h[1];r.a.useEffect((function(){fetch("".concat(y,"welle/channel")).then(function(){var e=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=5;break}return e.next=3,t.text();case 3:n=e.sent,i.current=k(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.useEffect((function(){function e(){var e=new Date;c.current=e,fetch("".concat(y,"welle/spectrum")).then((function(t){t.ok&&c.current===e&&t.arrayBuffer().then((function(e){return new Float32Array(e)})).then((function(e){return Array.from(e)})).then((function(t){a({x:i.current,y:t,z:e})}))}))}var t=setInterval(e,960);return e(),function(){return clearInterval(t)}}),[]);var O=r.a.useMemo((function(){if(n){var e=Math.pow(2,m.releasedTo);return function(e,t){if(1===t)return e;for(var n=Array.from(e),a=t-1;a<e.length;a++){for(var r=0,i=a-t+1,c=a;c>=i;c--)r+=e[c];n[i]=r/t}return n}(function(e,t){if(1===t)return e;for(var n=Array.from({length:e.length/t}),a=0,r=t-1;r<e.length;r+=t){for(var i=0,c=r;c>=r-t+1;c--)i+=e[c];n[a++]=i/t}return n}(n.y,2),e)}return[]}),[n]),w=[];if(0!==O.length){void 0===d.current&&(d.current=O[0]),void 0===u.current&&(u.current=O[0]);for(var T=!1,A=!1,C=0;C<O.length;C++)O[C]<d.current&&(T=!0,d.current=O[C]),O[C]>u.current&&(A=!0,u.current=O[C]);T&&(d.current=Math.floor(d.current),d.current-=5+d.current%5),A&&(u.current=Math.floor(u.current),u.current+=5-u.current%5);for(var P=d.current;P<u.current;P+=5)w.push(P)}var I=i.current.filter((function(e,t){return t%128===0})).slice(1);return null===n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.v,{}),Object(b.jsx)("p",{style:{textAlign:"center"},children:"Attempting to fetch spectrum data..."})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"db-medium",children:Object(b.jsx)(o.g,{label:"SMA window length",subLabel:Object(b.jsx)(v,{content:S}),inline:!0,className:"db-input-element",children:Object(b.jsx)(o.u,{min:0,max:6,stepSize:1,labelStepSize:1,labelRenderer:function(e){return"".concat(Math.pow(2,e))},onChange:function(e){return p((function(t){return Object(l.a)(Object(l.a)({},t),{},{changedTo:e})}))},onRelease:function(e){return p((function(t){return Object(l.a)(Object(l.a)({},t),{},{releasedTo:e})}))},value:m.changedTo,intent:"primary",showTrackFill:!1,vertical:!1})})}),Object(b.jsx)(o.f,{}),Object(b.jsx)(x.a,{data:{x:n.x,y:O,z:n.z},layout:{width:1024,paddingTop:40,paddingRight:0,paddingBottom:40,paddingLeft:70,line:{height:40*w.length},heatmap:{height:200,marginTop:32},scale:{height:24,marginTop:32}},options:{xAxis:{displayAxis:!0,displayGrid:!0,values:I,color:"black"},yAxis:{displayAxis:!0,displayGrid:!0,values:w,color:"black"},zAxis:{displayAxis:!0,displayBins:10,color:"black"},theme:"blue-green-red"}})]})},A=function(e){var t=e.children,n=e.label,r=e.defaultIsOpen,i=void 0!==r&&r,c=Object(a.useState)(i),l=Object(s.a)(c,2),d=l[0],u=l[1];return Object(b.jsxs)(o.c,{className:"db-card",elevation:1,children:[Object(b.jsx)(o.a,{icon:d?"caret-right":"caret-down",minimal:!0,fill:!0,large:!0,outlined:!1,alignText:"left",text:Object(b.jsx)(o.h,{style:{margin:0},children:n}),onClick:function(){return u((function(e){return!e}))}}),Object(b.jsxs)(o.d,{isOpen:d,children:[Object(b.jsx)(o.f,{style:{marginBottom:"1em"}}),t]})]})},C=[{pattern:0,comb:0,delay:0,delay_km:0,error:0}],P=r.a.memo((function(e){var t=e.mux,n="";if(void 0!==t&&0!==t.utctime.day){var a=t.utctime,r=a.year,i=a.month,c=a.day,s=a.hour,l=a.minutes,d=a.seconds,u=r.toString(),j=i.toString().padStart(2,"0"),h=c.toString().padStart(2,"0"),p=s.toString().padStart(2,"0"),g=l.toString().padStart(2,"0"),f=d.toString().padStart(2,"0");n="".concat(u,"-").concat(j,"-").concat(h,"T").concat(p,":").concat(g,":").concat(f,"Z")}var x=t?t.tii:C,O=t?"":"bp3-skeleton";return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.b,{intent:"primary",children:"Do not forget to configure the application before starting the application!"}),Object(b.jsxs)("div",{className:"db-medium-grid-container",children:[Object(b.jsx)(o.c,{className:"db-card db-primary-card bp3-text-large",elevation:1,children:Object(b.jsx)(m,{pair:{key:"Bit Error Ratio",value:null===t||void 0===t?void 0:t.qi.ber}})}),Object(b.jsx)(o.c,{className:"db-card db-primary-card bp3-text-large",elevation:1,children:Object(b.jsx)(m,{pair:{key:"Signal Noise Ratio",value:null===t||void 0===t?void 0:t.qi.snr,unit:"dB"}})}),Object(b.jsx)(o.c,{className:"db-card db-primary-card bp3-text-large",elevation:1,children:Object(b.jsx)(m,{pair:{key:"FIB Error Ratio",value:null===t||void 0===t?void 0:t.qi.fiber}})}),Object(b.jsx)(o.c,{className:"db-card db-primary-card bp3-text-large",elevation:1,children:Object(b.jsx)(m,{pair:{key:"RF Power",value:null===t||void 0===t?void 0:t.qi.power,unit:"dB"}})}),Object(b.jsx)(o.c,{className:"db-card db-primary-card bp3-text-large",elevation:1,children:Object(b.jsx)(m,{pair:{key:"Signal present",value:null===t||void 0===t?void 0:t.qi.signal}})}),Object(b.jsx)(o.c,{className:"db-card db-primary-card bp3-text-large",elevation:1,children:Object(b.jsx)(m,{pair:{key:"Synchronized",value:null===t||void 0===t?void 0:t.qi.sync}})})]}),Object(b.jsxs)("div",{className:"db-large-grid-container",children:[Object(b.jsxs)(o.c,{className:"db-card",elevation:1,id:"tii",children:[Object(b.jsx)(o.h,{children:"Transmitter Identification Information"}),Object(b.jsxs)(o.j,{bordered:!1,condensed:!0,interactive:!1,striped:!0,width:"100%",style:{marginTop:"10px"},className:O,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{style:{verticalAlign:"middle"},children:"Pattern"}),Object(b.jsx)("th",{style:{verticalAlign:"middle"},children:"Comb"}),Object(b.jsx)("th",{style:{verticalAlign:"middle"},children:"Delay"}),Object(b.jsx)("th",{style:{verticalAlign:"middle"},children:"Delay [km]"}),Object(b.jsx)("th",{style:{verticalAlign:"middle"},children:"Error"})]})}),Object(b.jsx)("tbody",{children:x.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{style:{verticalAlign:"middle"},children:e.pattern}),Object(b.jsx)("td",{style:{verticalAlign:"middle"},children:e.comb}),Object(b.jsx)("td",{style:{verticalAlign:"middle"},children:e.delay}),Object(b.jsx)("td",{style:{verticalAlign:"middle"},children:e.delay_km.toFixed(3)}),Object(b.jsx)("td",{style:{verticalAlign:"middle"},children:e.error.toFixed(3)})]},"".concat(e.pattern,"-").concat(e.comb))}))})]})]}),Object(b.jsxs)(o.c,{className:"db-card",elevation:1,children:[Object(b.jsx)(o.h,{children:"Ensemble"}),Object(b.jsxs)("div",{className:"db-dashboard-card-container",children:[Object(b.jsx)(m,{pair:{key:"Label",value:null===t||void 0===t?void 0:t.ensemble.label.label}}),Object(b.jsx)(m,{pair:{key:"Ensemble Identifier",value:null===t||void 0===t?void 0:t.ensemble.id}}),Object(b.jsx)(m,{pair:{key:"Extended Country Code",value:null===t||void 0===t?void 0:t.ensemble.ecc}}),Object(b.jsx)(m,{pair:{key:"UTC Time",value:n}})]})]}),Object(b.jsxs)(o.c,{className:"db-card",elevation:1,children:[Object(b.jsx)(o.h,{children:"Receiver"}),Object(b.jsxs)("div",{className:"db-dashboard-card-container",children:[Object(b.jsx)(m,{pair:{key:"Hardware Name",value:null===t||void 0===t?void 0:t.receiver.hardware.name}}),Object(b.jsx)(m,{pair:{key:"Gain",value:null===t||void 0===t?void 0:t.receiver.hardware.gain}}),Object(b.jsx)(m,{pair:{key:"Software Name",value:null===t||void 0===t?void 0:t.receiver.software.name}}),Object(b.jsx)(m,{pair:{key:"Software Version",value:null===t||void 0===t?void 0:t.receiver.software.version}})]})]})]}),Object(b.jsx)(A,{label:"Spectrum",children:Object(b.jsx)(T,{})})]})})),I=n(154);function E(e){return"".concat(e.channel," \u2013 ").concat(e.freq," kHz")}var q=function(e,t){var n=t.handleClick;return Object(b.jsx)(o.m,{label:e.key.toString(),onClick:n,text:E(e)},e.key)},F=function(e,t,n,a){var r=t.channel.toUpperCase(),i=e.toUpperCase();return a?r===i||t.freq===i:"".concat(t.key," ").concat(t.freq," ").concat(r).indexOf(i)>=0},B=I.a.ofType(),L=Object(b.jsxs)("div",{children:["Select the channel at which you want to monitor DAB signal. ",Object(b.jsx)("br",{}),"You can filter through all options by typing into the search input field."]}),R=Object(b.jsxs)("div",{children:["The interval at which the commit to database is executed. ",Object(b.jsx)("br",{}),"Recommended is the multiple of 96 ms. For example: 960."]}),D=Object(b.jsxs)("div",{children:["In default configuration, the SNMP traps are disabled. ",Object(b.jsx)("br",{}),"If you want to receive notifications via SNMP protocol ",Object(b.jsx)("br",{}),"in case of emergency, enable this option."]}),M=Object(b.jsxs)("div",{children:["This identifier will be included as a payload in SNMP trap notification. ",Object(b.jsx)("br",{}),"It is helpful to set unique identifier for each monitoring device in a network of devices."]}),z=Object(b.jsxs)("div",{children:["Similarly to Agent Identifier, this label will be included ",Object(b.jsx)("br",{}),"as a payload in SNMP trap notification."]}),U=Object(b.jsx)("div",{children:"IP address of a SNMP manager."}),H=Object(b.jsx)("div",{children:"Port of a SNMP manager."});function G(e){e.onStart(),fetch(e.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)}).then((function(t){return e.onSuccess(t)})).catch((function(t){return e.onError(t)}))}var W=function(e,t){return Object(l.a)(Object(l.a)({},e),t)},_={band:void 0,interval:960,agentIdentifier:0,agentLabel:"Unique label has not been set",managerHostname:"0.0.0.0",managerPort:162,trapEnabled:!1},V=function(){var e=r.a.useState(!0),t=Object(s.a)(e,2),n=t[0],a=t[1],i=r.a.useState(void 0),c=Object(s.a)(i,2),l=c[0],d=c[1],u=r.a.useReducer(W,_),j=Object(s.a)(u,2),h=j[0],m=j[1],p=function(e){var t={band:void 0,interval:void 0,agentIdentifier:void 0,agentLabel:void 0,managerHostname:void 0,managerPort:void 0,trapEnabled:void 0};return t.band||void 0!==e.band||(t.band="Select channel."),t.interval||e.interval%1===0||(t.interval="Enter decimal value."),t.agentIdentifier||e.agentIdentifier%1===0||(t.agentIdentifier="Enter decimal value."),t.managerHostname||/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(e.managerHostname)||(t.managerHostname="Enter valid IP address."),t.managerPort||e.managerPort%1===0||(t.managerPort="Enter decimal value."),t.managerPort||0!==e.managerPort||(t.managerPort="Enter valid port. Port 162 is assigned to SNMP trap."),t}(h),x=Object.values(p).some((function(e){return void 0!==e}));return r.a.useEffect((function(){var e=!0;return e&&a(!0),fetch("".concat(y,"flask/config/general")).then(function(){var t=Object(f.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=12;break}if(t.t0=e,!t.t0){t.next=8;break}return t.t1=m,t.next=6,n.json();case 6:t.t2=t.sent,(0,t.t1)(t.t2);case 8:e&&d(void 0),e&&a(!1),t.next=15;break;case 12:e&&m(_),e&&d(n),e&&a(!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e&&m(_),e&&d(t),e&&a(!1)})),function(){e=!1}}),[]),r.a.useEffect((function(){l instanceof Error&&ke.show({icon:"issue",intent:"warning",timeout:6e3,message:Object(b.jsxs)(b.Fragment,{children:["[",l.name,"] ",Object(b.jsx)("br",{}),"[",l.message,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to fetch the current general configuration!"]})}),l instanceof Response&&(404===l.status?ke.show({icon:"issue",intent:"primary",timeout:6e3,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",l.status," ",l.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to fetch the current general configuration! ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"File config.json does not exist yet."})]})}):ke.show({icon:"issue",intent:"warning",timeout:6e3,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",l.status," ",l.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to fetch the current general configuration!"]})}))}),[l]),n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.v,{}),Object(b.jsx)("p",{style:{textAlign:"center"},children:"Attempting to fetch current general configuration."})]}):Object(b.jsxs)("div",{className:"db-medium",children:[Object(b.jsx)(o.g,{label:"DAB+ Channel",subLabel:Object(b.jsx)(v,{content:L}),labelFor:"db-input-channel",helperText:p.band,inline:!0,className:"db-input-element",intent:void 0===p.band?"none":"danger",children:Object(b.jsx)(B,{items:w,itemPredicate:F,itemRenderer:q,noResults:Object(b.jsx)(o.m,{disabled:!0,text:"No results."}),onItemSelect:function(e){return m({band:e})},popoverProps:{fill:!0,usePortal:!1,position:"bottom"},inputProps:{placeholder:"Search..."},matchTargetWidth:!0,children:Object(b.jsx)(o.a,{id:"db-input-channel",text:h.band?E(h.band):"(Select)",icon:"caret-down",alignText:"left",fill:!0,intent:void 0===p.band?"none":"danger"})})}),Object(b.jsx)(o.g,{label:"Interval",subLabel:Object(b.jsx)(v,{content:R}),labelFor:"db-input-interval",helperText:p.interval,inline:!0,className:"db-input-element",intent:void 0===p.interval?"none":"danger",children:Object(b.jsx)(o.p,{id:"db-input-interval",min:96,majorStepSize:null,minorStepSize:null,stepSize:96,asyncControl:!0,buttonPosition:"right",fill:!0,value:h.interval,onValueChange:function(e){return m({interval:e})},intent:void 0===p.interval?"none":"danger"})}),Object(b.jsx)(o.g,{label:"Trap Enabled",subLabel:Object(b.jsx)(v,{content:D}),labelFor:"db-input-trapEnabled",helperText:p.trapEnabled,inline:!0,className:"db-input-element",intent:void 0===p.trapEnabled?"none":"danger",children:Object(b.jsx)(o.w,{id:"db-input-trapEnabled",checked:h.trapEnabled,large:!0,onChange:function(){return m({trapEnabled:!h.trapEnabled})}})}),Object(b.jsx)(o.g,{label:"Agent Identifier",subLabel:Object(b.jsx)(v,{content:M}),labelFor:"db-input-agentIdentifier",helperText:p.agentIdentifier,inline:!0,className:"db-input-element",intent:void 0===p.agentIdentifier?"none":"danger",children:Object(b.jsx)(o.p,{id:"db-input-agentIdentifier",min:0,asyncControl:!0,buttonPosition:"none",fill:!0,value:h.agentIdentifier,onValueChange:function(e){return m({agentIdentifier:e})},intent:void 0===p.agentIdentifier?"none":"danger"})}),Object(b.jsx)(o.g,{label:"Agent Label",subLabel:Object(b.jsx)(v,{content:z}),labelFor:"db-input-agentLabel",helperText:p.agentLabel,inline:!0,className:"db-input-element",intent:void 0===p.agentLabel?"none":"danger",children:Object(b.jsx)(o.k,{id:"db-input-agentLabel",asyncControl:!0,large:!1,small:!1,placeholder:"My unique agent label",rightElement:void 0,intent:void 0===p.agentLabel?"none":"danger",value:h.agentLabel,onChange:function(e){return m({agentLabel:e.target.value})}})}),Object(b.jsx)(o.g,{label:"Manager Hostname",subLabel:Object(b.jsx)(v,{content:U}),labelFor:"db-input-managerHostname",helperText:p.managerHostname,intent:void 0===p.managerHostname?"none":"danger",inline:!0,className:"db-input-element",children:Object(b.jsx)(o.k,{id:"db-input-managerHostname",asyncControl:!0,large:!1,small:!1,placeholder:"Example: 123.4.0.56",rightElement:void 0,intent:void 0===p.managerHostname?"none":"danger",value:h.managerHostname,onChange:function(e){return m({managerHostname:e.target.value})}})}),Object(b.jsx)(o.g,{label:"Manager Port",subLabel:Object(b.jsx)(v,{content:H}),labelFor:"db-input-managerPort",helperText:p.managerPort,inline:!0,className:"db-input-element",intent:void 0===p.managerPort?"none":"danger",children:Object(b.jsx)(o.p,{id:"db-input-managerPort",min:0,max:65535,clampValueOnBlur:!0,buttonPosition:"none",fill:!0,asyncControl:!0,value:h.managerPort,onValueChange:function(e){return m({managerPort:e})},intent:void 0===p.managerPort?"none":"danger"})}),Object(b.jsxs)("div",{className:"db-action-buttons",children:[Object(b.jsx)(o.a,{text:"Save",icon:"caret-right",intent:"primary",disabled:x,large:!0,outlined:!1,onClick:function(){return e=h,void G({url:"".concat(y,"flask/config/general"),data:e,onStart:function(){ke.show({icon:"info-sign",intent:"primary",message:"Attempting to save new general configuration..."})},onSuccess:function(e){e.ok?ke.show({icon:"tick",intent:"success",message:"Successfully saved new general configuration."}):ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",e.status," ",e.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to save new general configuration!"]})})},onError:function(e){ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[",e.name,"] ",Object(b.jsx)("br",{}),"[",e.message,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to save new general configuration!"]})})}});var e}}),Object(b.jsx)(o.a,{text:"Test SNMP trap",icon:"caret-right",intent:"primary",disabled:x,large:!0,outlined:!0,onClick:function(){return e=h,void G({url:"".concat(y,"flask/snmp/test"),data:e,onStart:function(){ke.show({icon:"info-sign",intent:"primary",message:"Attempting to test Simple Network Management Protocol trap..."})},onSuccess:function(e){e.ok?ke.show({icon:"tick",intent:"success",message:"Request to test Simple Network Management Protocol trap was successful."}):ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",e.status," ",e.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to test Simple Network Management Protocol trap!"]})})},onError:function(e){ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[",e.name,"] ",Object(b.jsx)("br",{}),"[",e.message,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to test Simple Network Management Protocol trap!"]})})}});var e}})]})]})},J=n(41),Y=Object(b.jsxs)("div",{children:["If you want this quality indicator ",Object(b.jsx)("br",{}),"to be taken into account in the ",Object(b.jsx)("br",{}),"evaluation process, then enable this option."]}),$=Object(b.jsx)("div",{children:"The alarm is generated when the value is outside of the specified range."}),K=Object(b.jsxs)("div",{children:["Trigger time is the waiting time before the alarm is generated. ",Object(b.jsx)("br",{}),"Entered value is assumed to be in seconds."]}),Z=function(e){var t=e.element,n=e.label,a=e.state,r=e.dispatchState,i=e.sliderProps;return Object(b.jsxs)(o.c,{className:"db-card db-primary-card",elevation:1,children:[Object(b.jsx)(o.i,{children:n}),Object(b.jsx)(o.g,{label:"Enabled",subLabel:Object(b.jsx)(v,{content:Y}),labelFor:"db-input-".concat(t,"-enabled"),inline:!0,className:"db-input-element db-alarm-config-element",children:Object(b.jsx)(o.w,{id:"db-input-".concat(t,"-enabled"),checked:a.enabled,label:void 0,onChange:function(){return r({type:"enabled"})},large:!0})}),i.min===i.max?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(o.g,{label:"Threshold",subLabel:Object(b.jsx)(v,{content:$}),disabled:!a.enabled,inline:!0,className:"db-input-element db-alarm-config-element",children:Object(b.jsx)(o.t,Object(l.a)(Object(l.a)({},i),{},{onChange:function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1];n!==a.low&&r({type:"low",payload:n}),i!==a.high&&r({type:"high",payload:i})},value:[a.low,a.high],disabled:!a.enabled,vertical:!1,intent:"primary"}))}),Object(b.jsx)(o.g,{label:"Trigger",subLabel:Object(b.jsx)(v,{content:K}),labelFor:"db-input-".concat(t,"-trigger"),disabled:!a.enabled,inline:!0,className:"db-input-element db-alarm-config-element",children:Object(b.jsx)(o.p,{id:"db-input-".concat(t,"-trigger"),min:0,asyncControl:!0,disabled:!a.enabled,large:!1,fill:!0,leftIcon:"stopwatch",onValueChange:function(e){return r({type:"trigger",payload:e})},placeholder:"60",rightElement:void 0,value:a.trigger})})]})},Q=function(e,t){return"enabled"===t.type?Object(l.a)(Object(l.a)({},e),{},{enabled:!e.enabled}):Object(l.a)(Object(l.a)({},e),{},Object(J.a)({},t.type,t.payload))},X=function(e,t){switch(t.type){case"all":return t.payload;case"snr":return Object(l.a)(Object(l.a)({},e),{},{snr:Q(e.snr,t.payload)});case"ber":return Object(l.a)(Object(l.a)({},e),{},{ber:Q(e.ber,t.payload)});case"power":return Object(l.a)(Object(l.a)({},e),{},{power:Q(e.power,t.payload)});case"fiber":return Object(l.a)(Object(l.a)({},e),{},{fiber:Q(e.fiber,t.payload)});case"signal":return Object(l.a)(Object(l.a)({},e),{},{signal:Q(e.signal,t.payload)});case"sync":return Object(l.a)(Object(l.a)({},e),{},{sync:Q(e.sync,t.payload)})}},ee={snr:{enabled:!0,low:5,high:25,trigger:60},ber:{enabled:!0,low:0,high:.25,trigger:10},power:{enabled:!1,low:-40,high:0,trigger:10},fiber:{enabled:!0,low:0,high:1,trigger:10},signal:{enabled:!0,low:1,high:1,trigger:10},sync:{enabled:!0,low:1,high:1,trigger:10}},te=function(){var e=r.a.useState(!0),t=Object(s.a)(e,2),n=t[0],a=t[1],i=r.a.useState(void 0),c=Object(s.a)(i,2),l=c[0],d=c[1],u=r.a.useReducer(X,ee),j=Object(s.a)(u,2),h=j[0],m=j[1];r.a.useEffect((function(){var e=!0;return e&&a(!0),fetch("".concat(y,"flask/config/alarm")).then(function(){var t=Object(f.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=13;break}if(t.t0=e,!t.t0){t.next=9;break}return t.t1=m,t.next=6,n.json();case 6:t.t2=t.sent,t.t3={type:"all",payload:t.t2},(0,t.t1)(t.t3);case 9:e&&d(void 0),e&&a(!1),t.next=16;break;case 13:e&&m({type:"all",payload:ee}),e&&d(n),e&&a(!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e&&m({type:"all",payload:ee}),e&&d(t),e&&a(!1)})),function(){e=!1}}),[]),r.a.useEffect((function(){l instanceof Error&&ke.show({icon:"issue",intent:"warning",timeout:6e3,message:Object(b.jsxs)(b.Fragment,{children:["[",l.name,"] ",Object(b.jsx)("br",{}),"[",l.message,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to fetch the current alarm configuration!"]})}),l instanceof Response&&(404===l.status?ke.show({icon:"issue",intent:"primary",timeout:6e3,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",l.status," ",l.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to fetch the current alarm configuration! ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"File alarmConfig.json does not exist yet."})]})}):ke.show({icon:"issue",intent:"warning",timeout:6e3,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",l.status," ",l.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to fetch the current alarm configuration!"]})}))}),[l]);return n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.v,{}),Object(b.jsx)("p",{style:{textAlign:"center"},children:"Attempting to fetch current alarm configuration."})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"db-huge-grid-container",children:[Object(b.jsx)(Z,{element:"snr",label:"Signal Noise Ratio",state:h.snr,dispatchState:function(e){return m({type:"snr",payload:e})},sliderProps:{min:0,max:50,stepSize:1,labelStepSize:5}}),Object(b.jsx)(Z,{element:"ber",label:"Bit Error Ratio",state:h.ber,dispatchState:function(e){return m({type:"ber",payload:e})},sliderProps:{min:0,max:.5,stepSize:.01,labelStepSize:.1}}),Object(b.jsx)(Z,{element:"power",label:"Power",state:h.power,dispatchState:function(e){return m({type:"power",payload:e})},sliderProps:{min:-100,max:100,stepSize:1,labelStepSize:50}}),Object(b.jsx)(Z,{element:"fiber",label:"FIB Error Ratio",state:h.fiber,dispatchState:function(e){return m({type:"fiber",payload:e})},sliderProps:{min:0,max:1,stepSize:.083,labelStepSize:.25,labelPrecision:2}}),Object(b.jsx)(Z,{element:"signal",label:"Signal Present",state:h.signal,dispatchState:function(e){return m({type:"signal",payload:e})},sliderProps:{min:1,max:1,stepSize:1,labelStepSize:1}}),Object(b.jsx)(Z,{element:"sync",label:"Synchronization",state:h.sync,dispatchState:function(e){return m({type:"sync",payload:e})},sliderProps:{min:1,max:1,stepSize:1,labelStepSize:1}})]}),Object(b.jsx)(o.a,{text:"Save",icon:"caret-right",intent:"primary",disabled:!1,large:!0,outlined:!1,onClick:function(){ke.show({icon:"info-sign",intent:"primary",message:"Attempting to save new alarm configuration..."}),fetch("".concat(y,"flask/config/alarm"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(function(){var e=Object(f.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.ok?ke.show({icon:"tick",intent:"success",message:"Successfully saved new alarm configuration."}):ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",t.status," ",t.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to save new alarm configuration!"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[",e.name,"] ",Object(b.jsx)("br",{}),"[",e.message,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to save new alarm configuration!"]})})}))}})]})},ne=r.a.memo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(A,{label:"General configuration",defaultIsOpen:!1,children:Object(b.jsx)(V,{})}),Object(b.jsx)(A,{label:"Alarm configuration",defaultIsOpen:!1,children:Object(b.jsx)(te,{})})]})}));function ae(e,t,n,r){var i=Object(a.useState)({isLoading:!0,data:e,error:void 0}),c=Object(s.a)(i,2),o=c[0],d=c[1];return Object(a.useEffect)((function(){var a=!0;function i(){d((function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0})})),fetch(t,n).then(function(){var t=Object(f.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=12;break}if(t.t0=a,!t.t0){t.next=10;break}return t.t1=d,t.next=6,n.json();case 6:t.t2=t.sent,t.t3=void 0,t.t4={isLoading:!1,data:t.t2,error:t.t3},(0,t.t1)(t.t4);case 10:t.next=13;break;case 12:a&&d({isLoading:!1,data:e,error:n});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){a&&d({isLoading:!1,data:e,error:t})}))}var c=null;return void 0!==r?c=setInterval(i,r):i(),function(){a=!1,clearInterval(c)}}),[e,t,n,r]),o}var re={hardware:"My awesome hardware",software:"My awesome software",network:"My awesome network",hostname:"My awesome hostname"},ie=function(){var e=ae(re,"".concat(y,"flask/info/device"),void 0,void 0),t=e.isLoading,n=e.data,a=void 0!==e.error||t?"bp3-skeleton":"";return Object(b.jsx)("table",{className:"db-table db-th-left",children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:a,children:"Hardware:"}),Object(b.jsx)("td",{className:a,children:n.hardware})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:a,children:"Software:"}),Object(b.jsx)("td",{className:a,children:n.software})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:a,children:"Network:"}),Object(b.jsx)("td",{className:a,children:n.network})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:a,children:"Hostname:"}),Object(b.jsx)("td",{className:a,children:n.hostname})]})]})})},ce=r.a.memo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(A,{label:"User's manual",children:Object(b.jsxs)("div",{className:"db-medium",children:[Object(b.jsxs)("p",{className:"bp3-running-text",children:["Hello and thank you for taking the time to read this user's manual. The purpose of this manual si to explain how to interact with this monitoring device of ",Object(b.jsx)("em",{children:"Digital Audio Broadcasting"})," (DAB). If you stumple upon any abbreviation which you don't know the meaning of, feel free to visit the next section ",Object(b.jsx)("em",{children:"Glossary"})," in the ",Object(b.jsx)("em",{children:"Documentation"})," tab. If you don't know what to do in a specific situation or section, look for blue help button in close proximity for detailed explanation."]}),Object(b.jsxs)("p",{className:"bp3-running-text",children:["In order for the monitoring device to work properly, it is crucial to set up the monitoring device before starting the device. Monitoring device can be set up in the section ",Object(b.jsx)("em",{children:"General Configuration"})," in the ",Object(b.jsx)("em",{children:"Configuration"})," tab. The most important parameter is the ",Object(b.jsx)("em",{children:"channel"})," parameter. Select the desired channel at which the device will be monitoring. Parameter ",Object(b.jsx)("em",{children:"interval"})," is the time period (in miliseconds) of saving the data into the database. The parameter ",Object(b.jsx)("em",{children:"interval"})," shall be the multiple of 96 which is the duration of a DAB frame in miliseconds. It is discouraged to set the ",Object(b.jsx)("em",{children:"interval"})," to low value bacause that could fill up the free space relatively quickly. Additionally, enable the parameter ",Object(b.jsx)("em",{children:"trap enabled"})," when you want the monitoring device to evaluate quality indicators of the DAB broadcasting and send SNMP trap when the quality indicators are out of range. If you decide to enable traps, make sure to set up other SNMP-related paramers properly as well as alarm configuration before starting the device which you can find in the section ",Object(b.jsx)("em",{children:"Alarm Configuration"})," in the ",Object(b.jsx)("em",{children:"Configuration"})," tab. Next paragraph explains the section ",Object(b.jsx)("em",{children:"Alarm Configuration"}),"."]}),Object(b.jsxs)("p",{className:"bp3-running-text",children:["If you have decided to enable traps, it is required to set up the ",Object(b.jsx)("em",{children:"Alarm Configuration"})," in the ",Object(b.jsx)("em",{children:"Configuration"})," tab as well. Every quality indicator can be enabled or disabled independently from each other. Set up threshold values for each quality indicator. When the value is inside the specified threshold range, it evaluated as normal operation that doesn't generate the alarm. Trigger time is the waiting time before the alarm is generated. Note that when the alarm is generated, the trigger time is also the time which must pass before generating yet another alarm. Alarm is generated until it is resolved. Therefore, it is crucial to set up ",Object(b.jsx)("em",{children:"Alarm Configuration"})," properly in order to prevent spamming false alarm!"]}),Object(b.jsxs)("p",{className:"bp3-running-text",children:["Starting the monitoring process is not a simple task and that's why it is neccessary to set up the configuration of the device before starting the monitoring. In order to start the device, open the section ",Object(b.jsx)("em",{children:"Status"})," in the right-hand aside panel. By opening the ",Object(b.jsx)("em",{children:"Status"})," section, the current status of the monitoring device is acquired which may take a while. Once the current status is acquired, proceed by clicking on the big green ",Object(b.jsx)("em",{children:"Start"})," button. When the request to start the device is successfully fullfiled, the small informative tost block appears at the top of the page. When the starting of the monitoring has been successful, you will see (after a little while) that all elements under the button turn to green, indicating that that script, process or resource is ok. Note that when you have disabled the traps, the evaluation script is turned off. In order to stop the monitoring, you procced very similarly."]}),Object(b.jsx)("p",{className:"bp3-running-text",children:"Regarding the spectrogram, note that the server is sometimes busy and cannot respond to the requests. In that case, the spectrogram cannot be updated. Furthermore, when response time of the server is bigger than the period of updating the spectrogram, the data included in the response are discarded."}),Object(b.jsxs)("p",{className:"bp3-running-text",children:["Thank you for taking the time to read this user's manual. Hopefully, now you understand how to use this device. My contact: ",Object(b.jsx)("em",{children:"jakub.svajka98@gmail.com"}),"."]})]})}),Object(b.jsx)(A,{label:"Glossary",children:Object(b.jsxs)("div",{className:"db-medium",children:[Object(b.jsx)(m,{pair:{key:"A Bit Error Ratio is the number of bit errors divided by the total number of transferred bits during a studied time interval. Bit error ratio is a unitless performance measure, often expressed as a percentage.",value:"Bit Error Ratio (BER)"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"A Signal Noise Ratio is the ratio of signal power to the noise power, and its unit of expression is typically decibels (dB).",value:"Signal Noise Ratio (SNR)"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"A FIB Error Ratio is the ratio of CRC errors of FIB channel to the total number of transferred blocks during a studied time interval.",value:"FIB Error Ratio (FIBER)"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"RF Power represents the average power of the spectrum. Note that the value is not absolute (the value doesn't represent the real input power).",value:"RF Power"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"This value indicates whether the monitoring device has found the null symbol in DAB frame. This value can also be understood as whether any DAB broadcasting is present at that particular channel.",value:"Signal Present"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"This value indicates whether the monitoring device has been able to synchronize. Synchronization is very important in DAB. If the device is unable to synchronize, it cannot work properly.",value:"Synchronized"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(o.f,{style:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"Power Spectral Density of the signal describes the power present in the signal as a function of frequency, per unit frequency. Power spectral density is commonly expressed in watts per hertz (W/Hz).",value:"Power Spectral Density (PSD)"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"A Transmitter Identification Information is a way to uniquely identify a transmitter, specifically by the combination of pattern and comb values.",value:"Transmitter Identification Information (TII)"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"A Dynamic Label Segment, is a text accompanying the digital radio. A maximum of 128 bytes can be transmitted per label segment. Typical dynamic label content is the music title and artist currently playing, the hotline telephone number of the radio station or the latest short messages.",value:"Dynamic Label Segment (DLS)"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"Ensemble is a group (multiplex) of radio stations. A multiplex is a stream of digital information that includes audio and other data transmitted on a single radio channel.",value:"Ensemble"},keyTagStyle:{color:"#182026"},parentTagStyle:{marginBottom:"1em"}}),Object(b.jsx)(m,{pair:{key:"A spectrogram is a visual representation of the spectrum in time. One can see variation of a spectrum in time.",value:"Spectogram"},keyTagStyle:{color:"#182026"}})]})}),Object(b.jsx)(A,{label:"System Information",children:Object(b.jsx)(ie,{})})]})})),se=function(e){var t=e.onClick;return Object(b.jsxs)("div",{id:"logo",className:"bp3-heading",onClick:t,children:["DAB",Object(b.jsx)("span",{className:"bp3-button bp3-intent-primary",children:"ING"}),"+"]})},oe=function(e){var t,n=e.status;return t=n.isOn?Object(b.jsx)(o.x,{intent:n.isOk?"success":"danger",round:!0,fill:!1,children:"ON"}):Object(b.jsx)(o.x,{intent:n.isOk?"success":"danger",round:!0,fill:!1,children:"OFF"}),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:n.label}),t]})},le=r.a.memo((function(){var e=ae(void 0,"".concat(y,"flask/info/status"),void 0,5e3),t=e.isLoading,n=e.data,a=e.error,i=r.a.useState("Loading"),c=Object(s.a)(i,2),d=c[0],u=c[1],j=r.a.useRef(!0),h=r.a.useRef(!0);r.a.useEffect((function(){n&&h.current&&(n.some((function(e){return!1===e.isOk}))?j.current&&u("Start"):j.current&&u("Stop"))}),[n]),r.a.useEffect((function(){return function(){j.current=!1}}),[]);var m=r.a.useMemo((function(){var e=function(){var e=Object(f.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.current&&u("Loading"),j.current&&(h.current=!1),fetch(t).then(function(){var e=Object(f.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.ok?ke.show({icon:"tick",intent:"success",message:Object(b.jsxs)(b.Fragment,{children:["Successfully ",n?"started":"stopped"," the application."]})}):ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[Error: ",t.status," ",t.statusText,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to ",n?"start":"stop"," the application!"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ke.show({icon:"issue",intent:"danger",timeout:0,message:Object(b.jsxs)(b.Fragment,{children:["[",e.name,"] ",Object(b.jsx)("br",{}),"[",e.message,"] ",Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),"Unable to ",n?"start":"stop"," the application!"]})})})).finally((function(){j.current&&(h.current=!0)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();switch(d){case"Start":return{intent:"success",disabled:!1,loading:!1,text:d,onClick:function(){return e("".concat(y,"flask/start"),!0)}};case"Stop":return{intent:"danger",disabled:!1,loading:!1,text:d,onClick:function(){return e("".concat(y,"flask/stop"),!1)}};case"Loading":default:return{intent:"none",disabled:!0,loading:!0,text:d}}}),[d]);if(void 0===n&&t)return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.v,{}),Object(b.jsx)("p",{style:{textAlign:"center"},children:"Attempting to fetch the current status."})]});if(void 0!==a){if(a instanceof Error)return Object(b.jsx)(o.o,{icon:"issue",title:"[".concat(a.name,"]"),description:Object(b.jsxs)(b.Fragment,{children:[a.message," ",Object(b.jsx)("br",{}),"Unable to fetch the current status!"]})});if(a instanceof Response)return Object(b.jsx)(o.o,{icon:"issue",title:"[Error: ".concat(a.status," ").concat(a.statusText,"]"),description:"Unable to fetch the current status!"})}return Object(b.jsxs)("div",{className:"db-widget-container",children:[Object(b.jsx)(o.a,Object(l.a)(Object(l.a)({},m),{},{alignText:"center",fill:!0,large:!0,outlined:!1})),Object(b.jsx)("div",{className:"db-status-container",children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(b.jsx)(oe,{status:e},t)}))})]})})),de=n(2),ue=Object(b.jsx)("span",{style:{fontWeight:600},children:"Audio Service Component Type"}),be=Object(b.jsx)("span",{style:{fontWeight:600},children:"Sub-Channel Identifier"}),je=Object(b.jsx)("span",{style:{fontWeight:600},children:"Data Service Component Type"}),he=Object(b.jsx)("span",{style:{fontWeight:600},children:"Service Component Identifier"}),me=function(e){var t=e.service,n=e.audio,a=e.dispatchAudio,i=r.a.useState(!1),c=Object(s.a)(i,2),d=c[0],u=c[1],j=r.a.useMemo((function(){var e="".concat(y,"welle").concat(t.url_mp3),r=n.state;switch(n.src!==e&&(r="stop"),null===t.url_mp3&&(r="init"),r){case"start":return{intent:"none",disabled:!0,loading:!0};case"playing":return{icon:"stop",intent:"danger",onClick:function(){return a({type:"stop"})}};case"init":return{icon:"cross",intent:"none",disabled:!0};case"stop":default:return{icon:"play",intent:"success",onClick:function(){return a({type:"start",payload:e})}}}}),[n,a,t.url_mp3]),h=t.components[0];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"db-service-label db-overflow",style:{verticalAlign:"middle"},children:t.label.label}),Object(b.jsx)("td",{style:{verticalAlign:"middle",textAlign:"center"},children:Object(b.jsx)(o.a,Object(l.a)({small:!0},j))}),Object(b.jsx)("td",{style:{verticalAlign:"middle",textAlign:"center"},children:Object(b.jsx)(o.a,{icon:"info-sign",intent:"primary",small:!0,onClick:function(){return u(!0)}})})]}),Object(b.jsxs)(o.e,{isOpen:d,onClose:function(){return u(!1)},title:Object(b.jsx)("img",{width:"150px",src:"".concat(y,"welle/slide/").concat(t.sid),alt:t.label.label}),isCloseButtonShown:!1,children:[Object(b.jsx)("div",{className:de.a.DIALOG_BODY,children:Object(b.jsxs)("div",{className:"db-small-grid-container",children:[Object(b.jsx)(m,{pair:{key:"Dynamic Label Segment",value:t.dls.label},parentTagStyle:{gridColumn:"1 / 4"},valueTagStyle:{overflow:"initial",whiteSpace:"initial",textOverflow:"initial"}}),Object(b.jsx)(m,{pair:{key:"Label",value:t.label.label}}),Object(b.jsx)(m,{pair:{key:"Short Label",value:t.label.shortlabel}}),Object(b.jsx)(m,{pair:{key:"Program Type",value:t.ptystring}}),Object(b.jsx)(m,{pair:{key:"Source Coding",value:t.mode.split(",")[0]}}),Object(b.jsx)(m,{pair:{key:"Sample Rate",value:t.samplerate,unit:"Hz"}}),Object(b.jsx)(m,{pair:{key:"Bitrate",value:h.subchannel.bitrate,unit:"kbit/s"}}),Object(b.jsx)(m,{pair:{key:"Language",value:t.languagestring}}),Object(b.jsx)(m,{pair:{key:"Service Identifier",value:t.sid}}),Object(b.jsx)(m,{pair:{key:"ASCTy",value:h.ascty},tooltipContent:ue})]})}),Object(b.jsx)("div",{className:de.a.DIALOG_BODY,children:Object(b.jsxs)("div",{className:"db-small-grid-container",children:[Object(b.jsx)(m,{pair:{key:"SubChId",value:h.subchannel.subchid},tooltipContent:be}),Object(b.jsx)(m,{pair:{key:"Start Address",value:h.subchannel.sad}}),Object(b.jsx)(m,{pair:{key:"Capacity Unit",value:h.subchannel.cu}}),Object(b.jsx)(m,{pair:{key:"Language Code",value:t.language}}),Object(b.jsx)(m,{pair:{key:"Program Type Code",value:t.programType}}),Object(b.jsx)(m,{pair:{key:"Protection",value:h.subchannel.protection}}),Object(b.jsx)(m,{pair:{key:"DSCTy",value:h.dscty},tooltipContent:je}),Object(b.jsx)(m,{pair:{key:"Label",value:h.label.label}}),Object(b.jsx)(m,{pair:{key:"SCId",value:h.scid},tooltipContent:he}),Object(b.jsx)(m,{pair:{key:"Transport Mode",value:h.transportmode},valueTagStyle:{textTransform:"capitalize"}})]})}),Object(b.jsx)("div",{className:de.a.DIALOG_FOOTER,children:Object(b.jsx)("div",{className:de.a.DIALOG_FOOTER_ACTIONS,children:Object(b.jsx)(o.a,{onClick:function(){return u(!1)},children:"Close"})})})]})]})},pe=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{children:["Press ",Object(b.jsx)(o.a,{icon:"play",intent:"success",small:!0})," button to start the audio."]}),Object(b.jsxs)("p",{children:["Press ",Object(b.jsx)(o.a,{icon:"stop",intent:"danger",small:!0})," button to stop the audio."]}),Object(b.jsxs)("p",{children:["When you change the service, the currently ",Object(b.jsx)("br",{}),"playing audio turns off automatically."]})]}),ge=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{children:["Additional information of the corresponding service will be ",Object(b.jsx)("br",{}),"displayed by pressing ",Object(b.jsx)(o.a,{icon:"info-sign",intent:"primary",small:!0})," button."]}),Object(b.jsxs)("p",{children:["Note that some of the fields might be unavailable (N/A) because ",Object(b.jsx)("br",{}),"they are not applicable for that specific type of service."]})]}),fe=function(e){var t=e.services,n=e.audio,a=e.dispatchAudio;return void 0===t?Object(b.jsx)(o.o,{icon:"issue",title:"Services not found",description:"Welle-cli is not running!"}):0===t.length?Object(b.jsx)(o.o,{icon:"issue",title:"Services not found",description:"Wait..."}):(t.sort((function(e,t){return e.components[0].subchannel.subchid-t.components[0].subchannel.subchid})),Object(b.jsxs)(o.j,{bordered:!1,condensed:!0,interactive:!1,striped:!0,width:"100%",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{style:{verticalAlign:"middle"},children:"Label"}),Object(b.jsx)("th",{style:{verticalAlign:"middle",textAlign:"center"},children:Object(b.jsx)(v,{content:pe,buttonProps:{small:!0}})}),Object(b.jsx)("th",{style:{verticalAlign:"middle",textAlign:"center"},children:Object(b.jsx)(v,{content:ge,buttonProps:{small:!0}})})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsx)(me,{service:e,audio:n,dispatchAudio:a},e.sid)}))})]}))},xe={state:"init",isPlaying:void 0,src:void 0},Oe=new Audio(void 0),ve=function(e,t){switch(t.type){case"start":return{state:t.type,isPlaying:void 0,src:t.payload};case"playing":return{state:t.type,isPlaying:!0,src:e.src};case"stop":return{state:t.type,isPlaying:!1,src:void 0};case"init":default:return xe}};var ye=function(e){ke.show({icon:"tick",intent:"success",message:"Successfully ".concat("start"===e?"started":"stopped"," the audio!")})},we=function(e){ke.show({icon:"issue",intent:"danger",message:"Unable to ".concat("start"===e?"start":"stop"," the audio!")})},Se=function(){var e=Object(a.useState)("dashboard"),t=Object(s.a)(e,2),n=t[0],i=t[1],c=function(e){var t=e.onSuccess,n=e.onError,a=r.a.useReducer(ve,xe),i=Object(s.a)(a,2),c=i[0],o=i[1],l=r.a.useRef(Oe),d=o;return r.a.useEffect((function(){function e(){return l.current.src===l.current.currentSrc}"start"===c.state&&c.src&&(l.current.src=c.src,l.current.play().then((function(){e()&&o({type:"playing"}),e()&&t("start")})).catch((function(){e()&&o({type:"stop"}),e()&&n("start")}))),"stop"===c.state&&(l.current.pause(),t("stop"))}),[c,t,n]),r.a.useEffect((function(){return function(){l.current.pause()}}),[]),[c,d]}({onSuccess:ye,onError:we}),l=Object(s.a)(c,2),d=l[0],u=l[1],j=ae(void 0,"".concat(y,"welle/mux.json"),void 0,5e3),h=(j.isLoading,j.data);j.error;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.n,{style:{padding:"0"},children:Object(b.jsx)("div",{className:"db-navbar-grid-container",children:Object(b.jsx)("div",{className:"db-navbar-grid-item",children:Object(b.jsxs)(o.n.Group,{align:"left",children:[Object(b.jsx)(o.n.Heading,{children:Object(b.jsx)(se,{onClick:function(){return i("dashboard")}})}),Object(b.jsx)(o.n.Divider,{}),Object(b.jsx)(o.a,{minimal:!0,icon:"dashboard",text:"Dashboard",intent:"dashboard"===n?"primary":"none",onClick:function(){return i("dashboard")}}),Object(b.jsx)(o.a,{minimal:!0,icon:"cog",text:"Configuration",intent:"configuration"===n?"primary":"none",onClick:function(){return i("configuration")}}),Object(b.jsx)(o.a,{minimal:!0,icon:"book",text:"Documentation",intent:"documentation"===n?"primary":"none",onClick:function(){return i("documentation")}})]})})})}),Object(b.jsxs)("div",{className:"db-dabing-grid-container",children:[Object(b.jsx)("main",{className:"db-dabing-grid-item",children:function(){switch(n){case"configuration":return Object(b.jsx)(ne,{});case"documentation":return Object(b.jsx)(ce,{});case"dashboard":default:return Object(b.jsx)(P,{mux:h})}}()}),Object(b.jsxs)("aside",{className:"db-dabing-grid-item db-aside-panel",children:[Object(b.jsx)(A,{label:"Status",children:Object(b.jsx)(le,{})}),Object(b.jsx)(A,{label:"Services",children:Object(b.jsx)(fe,{services:null===h||void 0===h?void 0:h.services,audio:d,dispatchAudio:u})})]})]})]})},ke=o.y.create({maxToasts:3,position:"top",autoFocus:!1,canEscapeKeyClear:!0});c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Se,{})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.7cd57cee.chunk.js.map